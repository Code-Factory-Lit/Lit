<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>프로젝트 상세</title>

    <link rel="stylesheet" href="/assets/css/project/default.css">
    <link rel="stylesheet" href="/assets/css/project/project.css">
    <link rel="stylesheet" href="/assets/css/default.css">


</head>

<body>

    <header></header>
    <main>
        <div class="mainWrap">
            <section class="sec1">
                <div th:object="${projectVO}">
                    <div class="projectImg">
                        <a>
                            <!-- 이미지 링크 추가 -->
                            <img src="" alt="">
                        </a>
                    </div>
                    <div class="projectInfoWrap">
                        <div>
                            <p class="infoKey" th:text="*{title}"></p>

                            <p>
                                <span>참가인원</span>
                                <span>102</span>
                                <span>게시물</span>
                                <span>201</span>
                            </p>
                        </div>
                        <div>
                            <label for="btn1" class="btn">참여하기</label>
                            <input type="hidden" id="btn1">
                        </div>
                        <div>
                            <p class="infoKey">
                                챌린지 기간
                            </p>
                            <p>
                                <span th:text="*{startDate}~*{startDate}">2022-06-01~06.22</span>
                            </p>
                        </div>
                        <div>
                            <p class="infoKey">
                                챌린지 소개
                            </p>
                            <p th:text="*{content}">
                            </p>
                        </div>
                        <div>
                            <p class="infoKey">
                                인증방법
                            </p>
                            <p th:text="*{authentication}">

                            </p>
                        </div>
                    </div>
                </div>
            </section>
            <section class="sec2">
                <div>
                    <figure>
                        <a>
                            <img src="/images/project/domImg/indi01.webp" alt="">
                        </a>
                    </figure>
                    <figure>
                        <a>
                            <img src="/images/project/domImg/indi02.webp" alt="">
                        </a>
                    </figure>
                    <figure>
                        <a>
                            <img src="/images/project/domImg/indi03.webp" alt="">
                        </a>
                    </figure>
                    <figure>
                        <a>
                            <img src="/images/project/domImg/indi04.jpg" alt="">
                        </a>
                    </figure>
                    <figure>
                        <a>
                            <img src="/images/project/domImg/indi05.webp" alt="">
                        </a>
                    </figure>
                    <figure>
                        <a>
                            <img src="/images/project/domImg/indi06.webp" alt="">
                        </a>
                    </figure>
                    <figure>
                        <a>
                            <img src="/images/project/domImg/indi01.webp" alt="">
                        </a>
                    </figure>
                    <figure>
                        <a>
                            <img src="/images/project/domImg/indi02.webp" alt="">
                        </a>
                    </figure>
                    <figure>
                        <a>
                            <img src="/images/project/domImg/indi03.webp" alt="">
                        </a>
                    </figure>
                    <figure>
                        <a>
                            <img src="/images/project/domImg/indi04.jpg" alt="">
                        </a>
                    </figure>
                    <figure>
                        <a>
                            <img src="/images/project/domImg/indi05.webp" alt="">
                        </a>
                    </figure>
                    <figure>
                        <a>
                            <img src="/images/project/domImg/indi06.webp" alt="">
                        </a>
                    </figure>

                </div>
            </section>
        </div>
    </main>
    <aside class="modalWindow">
        <div class="modalWrap">
            <div>윈도우</div>
        </div>
    </aside>
    <footer></footer>
</body>

<script src="/assets/js/jquery-3.6.0.min.js"></script>
<script th:inline="javascript">
    let pageNum = 1;
    const contBox = $('.sec2 > div'); // 이미지 리스트 뿌릴 위치
    // 최신순으로
    litUpList("newproject");

    function litUpList(category) {
        $.ajax({
            url: "/list/litsups/" + newproject + "/" + pageNum,
            type: "get",
            dataType: 'json',
            success: function (result) {
                pageNum++; // 다음 페이지 번호 지정
                // alert('성공');
                listadd(result);
            }, error: function (xhr, textStatus, errorThrown) {
                console.log('통신 실패');
                console.log(xhr);
                console.log(textStatus);
                console.log(errorThrown);
            }
        });
    }

    // 리스트에 추가하기
    function listadd(result) {

        let str = "/lit/display?fileName=";
        // console.log(result);
        $.each(result, function (i, ReviewDTO) {
            let src = "";
            //이미지 경로 첫번째 이미지만
            src += ReviewDTO.reviewFileList.get(0).uploadPath + "/";
            src += ReviewDTO.reviewFileList.get(0).uuid + "_";
            src += ReviewDTO.reviewFileList.get(0).name;

            str += " <figure><a href='"+ReviewDTO.reviewNumber+"'>";
            str += " <img src='"+"1"+"'> ";
            str += "</a></figure>";

        });
        contBox.append(str);
    }

    // 이미지 컨트롤러 바이트로 불러오기
    $(files).each(function(i, file) {
        str += "<div data-name='" + file.name + "' data-uuid='" + file.uuid + "' data-uploadpath='" + file.uploadPath + "' data-image='" + file.image + "'></div>";
        imageUrl += "/lit/display?fileName=" + file.uploadPath + "/" + file.uuid + "_"  + file.name;
    });


</script>

</html>
